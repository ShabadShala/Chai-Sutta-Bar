<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">        
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        
        
        <title>Chai Sutta Bar - Bagha Purana</title>
        <meta name="description" content="Biggest chai chain in India">    
        <meta name="robots" content="index, follow">
        <link rel="canonical" href="https://shabadshala.github.io/Chai-Sutta-Bar/">
        
        <link rel="manifest" href="manifest.json">
        
        <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@type": "WebPage",
                "name": "Chai Sutta Bar - Bagha Purana",
                "description": "Experience the taste of chai, pizza, burger and other edibles at Bagha Purana.",
                "url": "https://shabadshala.github.io/Chai-Sutta-Bar/",
                "publisher": {
                    "@type": "Organization",
                    "name": "Shabad Shala",
                    "logo": {
                        "@type": "ImageObject",
                        "url": "https://shabadshala.github.io/Chai-Sutta-Bar/icon-512.png"
                    }
                },
                "author": {
                    "@type": "Person",
                    "name": "Shabad Shala"
                    "name": "Shabad Shala"
                },
                "image": "https://shabadshala.github.io/Chai-Sutta-Bar/icon-512.png",
                "mainEntityOfPage": "https://shabadshala.github.io/Chai-Sutta-Bar/"
            }
        </script>
        
        
        <style>
            
            /* Universal reset */
            *,
            *::before,
            *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            }                
            
            html {
            font-size: clamp(3px, 1vw, 3.5px);
            }            
            
            /* /* General Styles */
            body {
            font-family: Arial, sans-serif;
            background-color: #212121; /* Black background */
            color: white; /* White text */
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden;
            max-width: 100vw;
            padding:2rem;       
            user-select: none; /* Prevents text selection */
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
            }
            
            .rectangle {
            width: 600px;
            height: 100vh; /* Ensure it covers the full viewport */
            position: fixed;
            top: 0; /* Align to the top */
            left: calc(50% - 300px); 
            border-left: 1px solid rgba(255, 255, 255, 0.1); /* 50% transparent */
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 9999; /* Ensure it is above all elements */
            pointer-events: none; /* Prevents blocking interactions */
            }
            
            
            
            
            
            /* Common Elements */            
            
            /* Close Button */
            #closeScrap, #closeOffer {
            position: absolute;
            top: 0;
            right: 1rem;
            font-size: 6rem;
            cursor: pointer;
            color: #333;
            }
            
            /* Scrap and offer delete button */
            .delete-btn, .offer-delete-btn {
            cursor: pointer;
            color: #cc0000;
            font-size: 4rem;
            margin-left: 2rem;
    		transition: transform 0.2s ease;
            }
            
            .delete-btn:hover, .offer-delete-btn:hover {
            transform: scale(1.2);
            color: #cc0000;
            }
            
            .qty-stepper, .offer-stepper {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background-color: #f5f5f5;
            border: 1px solid red;
            border-radius: 0.5rem;
            padding: 0.5rem;
            margin-right: auto;
            }
            
            .decrement-btn, .increment-btn, .off-decrement-btn, .off-increment-btn {
            cursor: pointer;
            background: none;
            border: none;
            font-size: 5rem;
            padding: 0 1rem;
            color: #333;
            transition: background-color 0.2s ease;
            }
            
            .decrement-btn:hover, .increment-btn:hover, .off-decrement-btn:hover, .off-increment-btn:hover {
            background-color: #ddd;
            }
            
            .decrement-btn:disabled, .increment-btn:disabled,  .off-decrement-btn:disabled, .off-increment-btn:disabled {
            background-color: #ccc !important; /* Gray background */
            color: transparent !important; /* Transparent text color */
            cursor: not-allowed !important; /* Change cursor */
            opacity: 0; /* Set opacity to 0 */
            pointer-events: none; /* Disable hover effect */
            }
            
            .qty-display, .offer-qty-display {
            font-size: 4rem;
            min-width: 2rem;
            text-align: center;
            color: #333;
            }
            
            /* Button Container */
            .button-container {
            display: flex;
            justify-content: center;     
            align-items: center;
            padding-top: 1rem;    
            gap: 5rem;
            }
            
            #orderScrap, #clearScrap, .order-btn, .clear-btn {
            display: inline-block;
            padding: 2rem 3rem;
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-size: 4rem;
            cursor: pointer;            
            }
            
            #smartPickBtn2 {
            padding: 1rem 1.5rem; /* Apply padding only to this button */
            }
            
            
            
            #orderScrap, .order-btn {
            background-color: #28a745;
            }
            
            #orderScrap:hover, .order-btn:hover {
            background-color: #218838;
            transform: translateY(-2px);
            }
            
            #clearScrap, .clear-btn {
            background-color: #dc3545; /* Red */
            }
            
            #clearScrap:hover, .clear-btn:hover {
            background-color: #c82333; /* Darker red on hover */
            transform: translateY(-2px);
            }
            
            
            /* Feedback Message */
            .feedback-message {
            position: fixed;
            bottom: 10%;
            left: 50%;
            transform: translateX(-50%);
            background: #333; /* Dark background */
            color: #fff; /* White text */
            padding: 2rem 2rem;
            border-radius: 1rem;
            font-size: 4rem;
            display: none;
            z-index: 3000;
            }           
            
            
            
            
            
            
            
            
            #loadingOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align towards top */
            }
            
            .loading-container {
            position: absolute;
            top: 50%; /* Set the center of spinner 40% from the top */
            transform: translateY(-50%); /* Adjust for proper centering */
            display: flex;
            flex-direction: column;
            align-items: center;
            }
            
            /* Spinner wrapper for positioning */
            .spinner-container {
            position: relative;  /* Allows absolute positioning inside */
            width: 25rem;
            height: 25rem;
            }
            
            /* Image centered inside spinner */
            .loading-image {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); /* Perfect centering */
            width: 85%; /* Adjust size */
            height: auto;
            }
            
            /* Spinner animation */
            .spinner {
            border: 3.5rem solid rgba(255, 255, 255, 0.2); /* Semi-transparent white background */
            border-top: 3.5rem solid #fae68e; /* Chai color for the spinning part */
            border-radius: 50%;
            width: 100%;
            height: 100%;
            animation: spin 1.5s linear infinite;
            
            }
            
            @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
            }
            
            /* Loading message */
            .loading-message {
            margin-top: 5rem;
            font-size: 5rem;
            color: white;
            font-family: Arial, sans-serif;
            font-weight: bold;
            letter-spacing: 0.5rem;
            }
            
            
            
            
            
            
            
            
            
            
            
            /* Main Header container */
            .header {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 600px;
            position: fixed; /* Fix the header at the top */
            top: 0;
            left: 50%; /* Move the header to the center horizontally */
            transform: translateX(-50%);
            background-color: #212121; /* Match the body background */
            z-index: 1001; /* Ensure the header stays above other content */
            padding: 1.5rem; /* Adjust padding as needed */
            box-shadow: 0 0.4rem 3rem rgba(0, 0, 0, 0.1); /* Adds a subtle shadow */
            border-bottom: 1px solid #fae68e; /* Adds a border */   
            z-index: 99;
            }
            
            .scrollable {
            position: absolute; /* Fix the header at the top */
            }
            
            /* Logo text */
            .logo-text {
            text-align: center;
            font-size: 8rem;              
            font-weight: bold;
            white-space: nowrap;
            max-width: 100%;        
            position: relative; /* Required for absolute positioning of child */
            }
            
            .logo-text .chai {
            color: #fae68e;
            }
            
            .logo-text .sutta {
            color: red;
            }
            
            .logo-text .bar {
            color: white;
            }
            
            /* Vegetarian symbol */
            .logo-text .bpa-logo {
            font-size: 3rem; /* Set font size */
            color: #F8BBD0;
            position: absolute; /* Position absolutely within .logo-text */
            top: 0; /* Align to the top */
            right: -7rem; /* Move to the right of the text */
            vertical-align: top; /* Align to the top */
            }
            
            .open-close {
            font-size: 5rem;            
            }
            
            @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
            }
            .blink {
            animation: blink 1s infinite;
            }
            
            
            
            
            
            
            
            
            
            #main-content {
            flex: 1; /* Grow to fill remaining space */
            padding-top: 16rem; /* Add padding equal to the header height */
            scroll-padding-top: 20rem;
            overflow-y: auto; /* Allow scrolling for content */
            }
            
            /* Search */
            .search-container {
            width: 70%;
            max-width: 400px;
            margin: 2rem auto; 
            margin-bottom: 2rem;
            position: relative;
            display: none;
            }
            
            /* Flex container for input and clear button */
            .search-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            width: 100%;
            }
            
            #searchInput {
            width: 100%;
            padding: 1.5rem;
            padding-left: 11rem;
            padding-right: 11rem;
            font-size: 6rem;
            border: 1px solid #fae68e;  /* Converted 2px to 0.125rem */
            border-radius: 5rem;              /* Increased from 3rem to 5rem for more roundness */
            background-color: #f0f0f0;         /* Changed to a light background color */
            color: #333;                     /* Adjusted text color for better contrast */
            outline: none;
            }
            
            #searchInput::placeholder {
            color: #888;
            }
            
            .search-clear-btn {
            position: absolute;
            right: 2.5rem;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            font-size: 10rem;
            color: black;
            z-index: 10;
            }
            
            .search-clear-btn:hover {
            color: red;
            }
            
            /* Search Lens (Magnifying Glass Icon) */
            .search-lens {
            position: absolute;
            left: 2.2rem; /* Adjust based on input padding */
            font-size: 5rem;
            color: white;
            cursor: pointer;
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
            }
            
            /* Hide the lens if input has text */
            .hide-lens .search-lens {
            display: none;
            }
            
            /* Animate the lens when hovering on the search bar */
            .search-input-wrapper:hover .search-lens {
            animation: shake 0.5s ease-in-out;
            }
            
            /* Shake Animation */
            @keyframes shake {
            0% {
            transform: translateX(0);
            }
            25% {
            transform: translateX(-0.3125rem); /* 5px ≈ 0.3125rem */
            }
            50% {
            transform: translateX(0.3125rem);  /* 5px ≈ 0.3125rem */
            }
            75% {
            transform: translateX(-0.3125rem); /* 5px ≈ 0.3125rem */
            }
            100% {
            transform: translateX(0);
            }
            }
            
            
            
            #filterContainer {
            display: flex;
            justify-content: center; /* Centers the entire content */
            align-items: center; /* Aligns items vertically */
            width: 100%; /* Ensures full width */
            margin-top: 1rem;  
            margin-bottom: 1rem; 
            font-size: 5rem;
            gap: 3rem; /* Gap between 3-button element and total-items-found */
            }
            
            .filter-label {
            color: #00FF00;
            }
            
            #filterButtons {
            display: flex;
            align-items: center;
            gap: 3rem; /* Gap between "Filter by" and 3-button element */
            }
            
            #threeButtonsContainer {
            display: flex;
            gap: 2rem; /* Space between buttons */
            padding: 1rem;
            position: relative; /* To position the background line */
            }
            
            #threeButtonsContainer::before {
            content: "";
            position: absolute;
            top: 50%;
            left: 25%;
            width: 50%;
            height: 2rem; /* Adjust thickness as needed */
            background-color: #f0f0f0; /* Line color */
            z-index: -1; /* Puts it behind the buttons */
            transform: translateY(-50%); /* Centers the line */
            }
            
            .filter-btn {
            width: 10rem;
            padding: 1rem 2rem;
            color: #333;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 1rem;
            cursor: pointer;
            }
            
            .filter-btn.active {
            background-color: #007bff;
            color: #fff;
            border-color: #007bff;            
            }
            
            #total-items-found {
            color: white;
            text-align: left; /* Ensures right alignment */
            }
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            #menu {
            margin: 0 auto; /* Centers the menu */            
            width: 100%; /* Default width for small screens */
            max-width : 600px;
            transition: width 0.3s ease;
            }
            
            .category-header {
            background-color: transparent;
            font-size: 6rem;
            font-weight: bold;
            font-family: 'Comic Sans MS';
            cursor: pointer;
            padding: 2rem 1rem; 
            display: flex;
            justify-content: space-between;
            color: #fae68e;
            align-items: center;            
            }
            
            .category-header:hover {
            transform: translateY(2px);
            }
            
            .category-header .left {
            font-weight: bold;        
            text-align: left;
            }
            
            .category-header .right {
            font-size: 5rem;
            text-align: right;
            white-space: nowrap;
            color: #40E0D0;
            }
            
            .category-items {
            padding-left: 1rem;
            padding-right: 1rem;
            padding-bottom: 0; /* Adds space after last item */
            }            
            
            .category-header.visible-border {
            border: 2px solid #F8BBD0;
            border-bottom: none;
            border-radius: 3rem 3rem 0 0;    
            }
            
            .category-items.visible-border {
            border: 2px solid #F8BBD0;
            border-top: none;
            border-radius: 0 0 3rem 3rem;
            margin-bottom: 2rem;
            }
            
            /* Menu items */
            .menu-item {
            padding: 1rem;
            border-bottom: 1px solid rgba(221, 221, 221, 0.3);            
            }
            
            .menu-item:first-child {
            border-top: 0;
            }
            
            .menu-item:last-child {
            border-bottom: none;
            margin-bottom: 1rem !important;
            }
            
            .menu-item-title {
            font-weight: bold;
            font-size: 5rem;
            }
            
            .menu-item-line {
            display: flex;
            justify-content: space-between;
            }
            
            .colAB {
            font-size: 5.5rem;
            font-weight: bold;
            }
            
            .colCDE {
            font-size: 6rem;
            font-weight: bold;
            color: #40E0D0;
            }
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            #scrapButton {
            all: unset; /* Reset all styles */
            position: fixed;
            bottom: 3rem;
            right: calc(50% - 300px + 3rem); /* Align with 600px centered menu */
            font-size: 4rem;
            cursor: pointer; /* Pointer for better UX */
            z-index: 1001;            
            /* Circular button */
            width: 13rem;
            height: 13rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #CD5C5C; /* Single solid color */
            border-radius: 50%; /* Makes it a circle */
            box-shadow: 0 0 15px #CD5C5C; /* Glow effect */
            z-index: 1600;
            }
            
            #scrapButton img {
            transition: opacity 0.3s ease, filter 0.3s ease;
            pointer-events: none; /* Ensure this remains */
            }            
            
            #scrapButton img.dimmed {
            opacity: 0.5;
            filter: grayscale(50%);
            }
            
            /* Green when items present */
            #scrapButton.has-items img {
            filter: invert(48%) sepia(79%) saturate(2476%) hue-rotate(86deg) brightness(118%) contrast(119%) !important;
            }
            
            @keyframes pulse-green {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
            }
            
            @media (max-width: 600px) {
            #scrapButton {
            right: 5rem; /* Default positioning for mobile */
            }
            }
            
            /* Hover effect */
            #scrapButton:hover {
            transform: scale(1.1); /* Slightly enlarge on hover */
            }
            
            #scrapButton.anti-hover:hover {
            transform: none; /* Prevents scaling */
            pointer-events: none; /* Optional: Prevents any interaction */
            }
            
            /* Active effect */
            #scrapButton:active {
            cursor: grabbing; /* Change cursor to grabbing when clicked */
            }
            
            #scrapButton .counter-badge {
            position: absolute;
            top: 2rem;
            left:58%;
            transform: translateX(-55%);
            color: white;
            font-weight: bold;
            font-size: 3rem;
            font-weight: bold;
            background: none;
            width: auto;
            height: auto;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: none;
            border-radius: 0;
            }
            
            .scrap-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 1500; /* Below scrapList's 2000 but above content */
            display: none;
            }
            
            
            
            
            
            
            .empty-warning {
            text-align: center;
            padding: 2rem;
            }
            
            .empty-icon {
            width: 80px;
            height: 80px;
            margin-bottom: 10px;
            }
            
            .empty-text {
            font-size: 4rem;
            color: #555;
            margin: 5px 0;
            text-align: center;
            }
            
            .button-container-center {
            display: flex;
            justify-content: center;
            margin-top: 15px;    
            }
            
            .smart-pick-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            background-color: #ff9800;
            color: white;
            border: none;
            padding: 2rem 2rem;
            border-radius: 1rem;
            font-size: 5rem;    
            cursor: pointer;
            transition: background 0.3s;
            }
            
            .smart-pick-btn:hover {
            background-color: #e68900;
            transform: translateY(-2px);
            }
            
            
            .button-icon {
            width: 22px;
            height: 22px;
            }
            
            
            
            
            
            
            
            
            /* Warning Modal Overlay */
            .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7); /* Darker semi-transparent background */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000; /* Ensure it's on top of everything */
            backdrop-filter: blur(5px); /* Adds a blur effect to the background */
            }
            
            /* Modal Content */
            .modal-content {
            position: relative;
            background: #212121; /* Dark background to match your theme */
            color: #fae68e; /* Accent color for text */
            padding: 4rem;
            border-radius: 2rem;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); /* Subtle shadow */
            border: 2px solid #fae68e; /* Accent border */
            animation: fadeIn 0.3s ease-in-out; /* Smooth fade-in animation */
            }
            
            /* Title Styling */
            .modal-content p {
            font-size: 6rem;
            font-weight: bold;
            color: #fae68e; /* Accent color */
            margin-bottom: 3rem;
            }
            
            /* List Styling */
            .modal-content ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
            }
            
            .modal-content ul li {
            font-size: 5rem;
            color: #ffffff; /* White text for better readability */
            margin: 2rem 0;
            line-height: 1.5;
            }
            
            /* Close Button */
            .close-button {
            position: absolute;
            top: 1rem;
            right: 2rem;
            font-size: 6rem;
            cursor: pointer;
            color: #fae68e; /* Accent color */
            transition: color 0.3s ease;
            }
            
            .close-button:hover {
            color: #ff4d4d; /* Red color on hover for better feedback */
            }
            
            /* Eng-Punjabi Container */
            .toggle-container {
            margin-top: 3rem;
            }
            
            .split-toggle {
            display: flex;
            width: 30rem;
            height: 8rem;
            border-radius: 5rem;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid #fae68e; /* Accent border */
            margin: 0 auto; /* Center the toggle */
            }
            
            .toggle-half {
            flex: 1;
            text-align: center;
            line-height: 8rem; /* Center text vertically */
            font-size: 4rem;
            font-weight: bold;
            transition: all 0.3s ease;
            color: #fae68e; /* Accent color */
            }
            
            .toggle-half:first-child {
            border-top-left-radius: 5rem;
            border-bottom-left-radius: 5rem;
            }
            
            .toggle-half:last-child {
            border-top-right-radius: 5rem;
            border-bottom-right-radius: 5rem;
            }
            
            .toggle-half.active {
            background: #fae68e; /* Accent background */
            color: #212121; /* Dark text for contrast */
            }
            
            .toggle-half:not(.active) {
            background: transparent;
            color: #fae68e; /* Accent color */
            }
            
            /* Fade-in Animation */
            @keyframes fadeIn {
            from {
            opacity: 0;
            transform: scale(0.9);
            }
            to {
            opacity: 1;
            transform: scale(1);
            }
            }
            
            
            
            
            
            
            
            
            
            
            
            
            /* Scrap List Modal */
            #scrapList, #offer-cart {
            display: none; /* Ensure it is hidden initially */
            position: fixed;
            top: 8%;
            left: 50%;
            transform: translateX(-50%);
            width: 350px;
            max-width: 90vw;
            max-height: 55vh; /* Ensures modal doesn't exceed viewport */
            background: rgba(255, 255, 255, 0.95);
            z-index: 2000;
            border-radius: 1rem;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            flex-direction: column;
            }   
            
            /* Scrap Content */
            .scrap-content, .offers-content {
            display: flex;
            flex-direction: column;
            width: 100%;
            height: 100%;
            max-width: 350px;
            padding: 1rem;
            border-radius: 1rem;
            color: #333;
            background: inherit;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden; /* Ensures no overflowing content */
            }
            
            #scrapItemsContainer {
            flex-grow: 1; /* Takes available space */
            overflow: hidden; /* Prevents extra scrolling outside */
            display: flex;
            flex-direction: column;
            height: calc(100% - 8rem); /* Adjust this based on totalPrice & buttons */
            }
            
            /* Scrap Items - Scrollable */
            #scrapItems {
            flex-grow: 1; /* Takes remaining space */
            overflow-y: auto; /* Enables scrolling */
            min-height: 10px; /* Ensures there's always some height */
            max-height: 100%; /* Prevents overflow issues */
            padding-right: 5px; /* Prevents scrollbar from hiding content */
            }
            
            /* Scrap Item Row */
            .scrap-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border-bottom: 1px solid #ddd;
            font-size: 4rem;
            color: #333;
            width: 100%;
            gap: 1rem;
            }
            
            /* Item Name */
            .scrap-item-name {
            flex: 3;
            overflow: hidden;
            word-wrap: break-word;
            white-space: normal;
            min-width: 100px;
            }
            
            .scrap-item-name .column-value {
            color: #005792; 
            font-weight: bold; /* Optional: Adjust font weight if needed */
            }
            
            /* Rate Container */
            .scrap-item-rate {
            flex: 2;
            text-align: right;
            padding: 0 1rem;
            min-width: 70px;
            max-width: 100px;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            }
            
            /* Updated Title Style */
            .scrap-content h2, .offers-content h2 {
            text-align: center;
            margin: 2rem 0;
            }
            
            /* Rate Text */
            .scrap-item-rate > span {
            white-space: nowrap;
            margin-left: auto;
            }            
            
            /* Total Price */
            #totalPrice {
            font-size: 2rem;
            text-align: right;
            margin: 1rem 0;
            font-weight: bold;
            flex-shrink: 0; /* Keeps it fixed */
            }
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            /* Offers Button Styles */
            #offers-button {
            position: relative;
            margin: 0 auto;
            width: fit-content;
            background: linear-gradient(135deg, #fae68e, #ffcc66);
            color: #212121;
            border: none;
            border-radius: 0 0 5rem 5rem;
            padding: 1rem 3rem;
            font-size: 5rem;
            cursor: pointer;
            transition: all 0.3s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            display: none; /* Hidden by default */
            z-index: 500;
            animation: float 3s ease-in-out infinite, glow 2s ease-in-out infinite alternate;
            }
            
            /* Floating Animation */
            @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-0.5rem); }
            100% { transform: translateY(0); }
            }
            
            /* Glow Effect */
            @keyframes glow {
            0% { box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); }
            100% { box-shadow: 0 6px 15px rgba(255, 204, 102, 0.7); }
            }
            
            /* Hover Effect */
            #offers-button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 204, 102, 0.9);
            }
            
            #offers-container {
            width: 100%;
            max-width: 450px;
            margin: 3rem auto;
            display: none;
            text-align: center;
            }
            
            /* Offer Section Styles */
            .offer-container {
            margin: 2rem auto;
            max-width: 600px;
            }
            
            @media (min-width: 451px) {
            #offers-container.offer-container {            
            display: none;            
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            justify-content: center;
            max-width: 600px;
            margin: 2rem auto;
            padding: 0 1rem;
            }
            
            /* Center the last item if it's alone in the last row */
            #offers-container.offer-container > *:nth-last-child(1):nth-child(odd) {
            grid-column: span 2; /* Make it span both columns */
            justify-self: center; /* Center it within the grid */
            max-width: 400px; /* Restrict max width to 400px */
            width: 100%; /* Ensure it doesn't stretch too much */
            }
            }
            
            .offer-item {
            background: #333;
            border-radius: 3rem;
            padding: 2rem;
            margin-bottom: 2rem;
            transition: transform 0.2s ease;
            border: 2px solid #CCFFE6;
            }
            
            .offer-title {
            color: #fae68e;
            font-size: 6rem;
            margin-bottom: 1rem;
            }
            
            .offer-dates {
            color: #40E0D0;
            font-size: 5rem;
            margin-bottom: 1rem;            
            }
            
            .offer-description {
            color: #ccc;
            font-size: 4.5rem;
            line-height: 1.4;
            }
            
            .offer-item button.add-offer-btn {
            position: absolute;
            top: 2rem;
            left: 2rem;
            background: #007bff;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s ease;
            }
            
            .offer-item button.add-offer-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            }
            
            
            
            
            
            
            
            
            
            
            /* Toggle Offer Cart Button */
            #toggle-cart {
            position: relative;
            z-index: 500;
            padding: 1rem 2rem;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 2rem;
            cursor: pointer;        
            }
            
            /* Cart Header */
            .cart-header {
            font-size: 6rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 2rem;
            text-align: center;
            display: flex;
            justify-content: space-between;
            align-items: center;
            }
            
            .cart-item-header {
            flex: 3;
            overflow: hidden;
            word-wrap: break-word;
            white-space: normal;
            min-width: 100px;
            }
            
            #cart-items {
            flex: 1;
            max-height: 30rem; //offer-height
            overflow-y: auto;
            }
            
            .cart-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border-bottom: 1px solid #ddd;
            font-size: 4rem;
            color: #333;
            width: 100%;
            gap: 1rem;
            }
            
            .cart-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            }
            
            .cart-item-title {
            font-size: 4rem;
            color: #2c3e50;
            font-weight: bold;
            flex: 2;
            }
            
            .cart-item-date {
            font-size: 4rem;
            color: #2c3e50;
            margin-top: 0.5rem;
            }
            
            .cart-item-description {
            font-size: 3.5rem;
            color: #666;
            margin-top: 0.5rem;
            }        
            
            /* Empty Cart */
            .empty-cart {
            color: #888;
            font-size: 4.5rem;
            text-align: center;
            padding: 3rem 0;
            }
            
            
            
            
            
            
            
            
            /* Apply overflow and relative positioning to both containers */
            #scrapItems,
            #cart-items {
            overflow-y: auto;
            position: relative; /* Needed for pseudo-elements if adding overlays later */
            }
            
            /* WebKit browsers scrollbar styling */
            #scrapItems::-webkit-scrollbar,
            #cart-items::-webkit-scrollbar {
            width: 10px; /* Increased width for better visibility */
            }
            
            #scrapItems::-webkit-scrollbar-track,
            #cart-items::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 5px;
            }
            
            #scrapItems::-webkit-scrollbar-thumb,
            #cart-items::-webkit-scrollbar-thumb {
            background: #bbb;
            border-radius: 5px;
            }
            
            #scrapItems::-webkit-scrollbar-thumb:hover,
            #cart-items::-webkit-scrollbar-thumb:hover {
            background: #999;
            }
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            /* Main Footer Container Styling */
            .footer-container {
            display: none;
            width: 90%;
            max-width: 600px;
            margin: 3rem auto;
            text-align: center;
            }
            
            /* Footer Styling */
            .footer {
            background-color: #10B981;
            padding: 2rem;
            color: #FFFFFF;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            }
            
            /* Address Styling */
            .footer .address {
            font-size: 4em;
            font-weight: bold;
            margin-bottom: 0.5rem;
            }
            
            /* Phone Numbers */
            .footer .phone {
            font-size: 4em;
            font-weight: bold;
            }
            
            .footer .phone a {
            color: blue;
            text-decoration: none;
            font-weight: bold;
            }
            
            .footer .phone a:hover {
            text-decoration: underline;
            }
            
            #counterContainer {
            display: flex;
            justify-content: center; /* Centers them */
            align-items: center; /* Aligns vertically */
            gap: 2rem; /* Adds space between them */
            margin-top:3rem;
            }
            
            @import url('https://fonts.cdnfonts.com/css/digital-7'); /* Import Digital-7 Font */            
            
            #visitorCounter,
            #viewsCounter {
            font-family: 'Digital-7', 'Courier New', monospace; /* Digital font */
            font-size: 5rem;
            color: #fae68e;
            background-color: black;
            padding: 1rem 2rem;
            border-radius: 10px;
            display: inline-block;
            text-align: center;
            letter-spacing: 0.2rem;
            box-shadow: 0px 0px 10px rgba(0, 255, 0, 0.8); /* Glowing effect */            
            }
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            /* Communication and Social media sidebar */
            .phone-icon {
            position: absolute;
            right: 2rem; /* Adjust distance from the right */
            top: 6rem;
            transform: translateY(-50%) scaleX(-1); /* Center vertically */
            width: 5rem; /* Adjust icon size */
            height: auto;  
            z-index: 10;
            }
            
            .phone-icon:hover {
            transform: translateY(-50%) scaleX(-1) scale(1.2); /* Slightly enlarge on hover */
            opacity: 0.8; /* Reduce opacity slightly */
            cursor: pointer;
            }
            
            /* Wrap container */
            .social {
            position: fixed; /* Ensures positioning without affecting elements */
            left: 50%;
            transform: translateX(-50%);
            max-width: 600px;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 1000; /* Keeps sidebar above other content */
            }
            
            #sidebar {
            position: fixed;
            right: -100px; /* Off-screen initially */
            top: 50%;
            transform: translateY(-50%);
            width: 17rem;
            background-color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px 0;
            transition: right 0.3s ease;
            z-index: 1000;
            box-shadow: -3px 0 5px rgba(0, 0, 0, 0.5);
            pointer-events: none;
            }
            
            #sidebar a {
            margin: 2rem 0;
            text-decoration: none;
            }
            
            #sidebar .logo {
            width: 10rem;
            height: 10rem;
            transition: transform 0.3s ease; /* Smooth zoom-in effect */
            }
            
            #sidebar .logo.hovered,
            #sidebar .logo:hover {
            transform: scale(1.3); /* Zoom-in effect when hovering */
            }
            
            
            #sidebar.open {
            right: 0; /* Show sidebar when open */
            pointer-events: auto;
            }
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            /* Hamburger hsidebar */
            #hamburger-button {
            position: fixed;
            top: 1.5rem;
            left: 1.5rem;
            z-index: 1001;
            cursor: pointer;
            padding: 2rem;
            background: rgba(33, 33, 33, 0.8);
            border-radius: 50%;
            width: 9rem;
            height: 9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            }                    
            
            .hamburger-lines {
            width: 100%;
            height: 100%;
            position: relative;
            }
            
            .hamburger-lines .line {
            position: absolute;
            width: 100%;
            height: .5rem;
            background: white;
            border-radius: 1rem;
            transition: all 0.3s ease;
            }
            
            .hamburger-lines .line:nth-child(1) {
            top: 20%;
            transform: translateY(-50%);
            }
            
            .hamburger-lines .line:nth-child(2) {
            top: 50%;
            transform: translateY(-50%);
            }
            
            .hamburger-lines .line:nth-child(3) {
            top: 80%;
            transform: translateY(-50%);
            }
            
            #hamburger-button:hover {            
            }
            
            #hamburger-button:hover .line {
            background: #FFD700;
            }
            
            /* Backdrop to Lock Scroll */
            #hsidebar-overlay {
            display: flex;;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.6); /* Slightly darker backdrop */            
            backdrop-filter: blur(5px); /* Adds a blur effect to the background */
            z-index: 100;
            flex-direction: column;
            }
            
            
            /* Hamburger sidebar container */
            .hsidebar-container {
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            max-width: 600px;
            width: 100%;
            height: 100%;
            z-index: 1002;
            overflow: hidden;
            pointer-events: none; /* Allow clicks through container when closed */            
            }
            
            #hsidebar {
            position: absolute;
            top: 0;
            left: -100%;
            width: 70%;
            height: 100%;
            background: #1c1c1c;
            backdrop-filter: blur(8px);
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.5);
            transition: left 0.3s ease;
            z-index: 1002;
            padding-top: 40px;
            border-radius: 0 15px 15px 0;
            color: #e0e0e0;
            pointer-events: auto; /* Enable clicks when visible */
            padding:2rem;
            display: flex;
            flex-direction: column;
            }
            
            #hsidebar.open {
            left: 0;
            }
            
            
            
            
            /* Header styling */
.sidebar-header {
  display: flex;
  background: rgba(30, 30, 30, 0.95);
  padding: 1rem; /* Consistent padding */
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  position: sticky;
  top: 0;
  z-index: 1;
  line-height: 1.5;
  align-items: center; /* Vertically center logo and text */
  gap: 3rem; /* Consistent gap between logo and text */
}

/* Header logo */
.header-logo {
  width: 8rem; /* Same as footer logo */
  height: 8rem; /* Same as footer logo */
  border-radius: 15px; /* Optional: rounded corners */
}

/* Header text */
.header-text {
  display: flex;
  flex-direction: column; /* Stack children vertically */
}

.header-title {
  display: flex;
  font-weight: 600;
  font-size: 5rem;
  color: #fff;
}

.header-subtitle {            
  font-size: 4.5rem;
  color: #888;
}
            
            /* Close button */
            #close-sidebar {
            position: absolute;
            top: 1.5rem;
            right: 2rem;
            font-size: 8rem;
            color: #f1f1f1; /* Lighter color for contrast */
            cursor: pointer;
            z-index: 1003; /* Ensures it is on top of other content */
            }
            
            #close-sidebar:hover {
            color: #ff5555; /* Change to red on hover */
            }
            
            
            /* Scrollable content */
            .scrollable-content {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            margin-bottom: 5rem;
            }
            
            
            .hsidebar-content {
            display: flex;
            flex-direction: column;
            height: 100%;
            }
            .hsidebar-option {
            padding: 2rem;
            margin: 2rem;
            cursor: pointer;
            font-size: 5rem;
            font-weight: 500;
            text-align: left;            
            color: #e0e0e0;            
            transition: background 0.3s ease, transform 0.3s ease;
            }
            
            .hsidebar-option:hover {
            background-color: #555;  /* Adjust the background color on hover */
            color: #fff; /* Change text color on hover */
            }
            
            .menu-icon {
            width: 1em;
            height: 1em;
            margin-right: 4rem;            
            vertical-align: middle;
            }
            
            .invert-icon {
            filter: invert(1); /* Inverts black to white */
            }
            
            .green-icon {
            /* For <img> tag */
            filter: invert(48%) sepia(79%) saturate(2476%) hue-rotate(86deg) brightness(118%) contrast(119%);            
            /* For inline SVG */
            fill: green;
            }
            
            .white-icon {
            /* For <img> tag */
            filter: invert(100%) brightness(100%); 
            
            /* For inline SVG */
            fill: white;
            }
            
            
            
            /* Options alignment */
            .hsidebar-option {
            display: flex;
            align-items: center;
            }
            
            .hsidebar-option.disabled-option {
            color: #666 !important;
            opacity: 0.7;
            cursor: default;
            pointer-events: none;
            }
            
            .hsidebar-option.disabled-option .menu-icon {
            filter: grayscale(100%) brightness(0.5);
            } 
            
            
            
            
            
            
            
            /* Like Container */
            #likeContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1.5rem; /* Reduced padding */
            padding-left: 2rem;
            width: 26.25%; /* 75% of original 35% */
            min-width: 100px; /* 75% of original 100px */
            border: 2px solid #fae68e;
            border-radius: 1.5rem; /* Reduced border radius */
            font-size: 5.25rem; /* 75% of original 7rem */
            font-weight: bold;
            color: #fae68e;
            margin: 3rem auto; /* Reduced margin */
            margin-bottom: 5rem;
            margin-top: 10rem;
            }
            
            /* Like Icon */
            #likeIcon {
            width: 6rem; /* 75% of original 8rem */
            height: 6rem; /* 75% of original 8rem */
            filter: invert(0.8);
            transition: filter 0.3s ease;
            }            
            
            #likeCounter {
            font-size: 5.25rem;
            margin-left: -4.25rem;
            display: inline-block; /* Required for animation */
            }
            
            @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
            }
            
            .like-animate {
            animation: pop 0.3s ease-in-out;
            }
            
            #likeIcon.liked {
            filter: invert(70%) sepia(90%) saturate(400%) hue-rotate(360deg);
            }
            
            /* Blinking animation */
            @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
            }
            
            /* Apply blinking effect */
            .blinking {
            animation: blink 0.7s infinite;
            }
            
            
            
            
            
            
            
            /* Hamburger Footer */            
.footer-text {
  font-size: 3.5rem;
  color: #f1f1f1;
  text-align: left;
  line-height: 1.5;
  padding: 1rem; /* Consistent padding */
  background: rgba(30, 30, 30, 0.95); /* Same as header */
  border-top: 1px solid rgba(255, 255, 255, 0.1); /* Same as header */
  flex-shrink: 0;
}

/* Footer content */
.footer-content {
  display: flex;
  align-items: center;
  gap: 3rem; /* Consistent gap between logo and text */
}

/* Footer logo */
.footer-logo {
  width: 8rem; /* Same as header logo */
  height: 8rem; /* Same as header logo */
  object-fit: contain;
  border-radius: 15px; /* Optional: rounded corners */
}
            
            
            
            
            #share-modal {
            display: none;
            /* Remove !important */
            }
            
            #share-modal.visible {
            display: flex !important;
            }
            
            .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
            }
            
        .modal-content {
        background: #fff;
        padding: 3rem;
        border-radius: 12px;
        text-align: center;
        font-size: 5rem;
        color: black;
        width: 95%;
        max-width: 400px;
        box-shadow: 0px 10px 30px rgba(0, 0, 0, 0.2);
        animation: fadeIn 0.3s ease-in-out;
        position: relative;
        }
        
        /* Title Styling */
        .modal-title {
        font-size: 7rem;
        font-weight: bold;
        color: #333;
        margin-bottom: 15px;
        }
        
        /* Close Button */
        .close-btn {
        position: absolute;
        top: 2rem;
        right: 3rem;
        cursor: pointer;
        font-size: 8rem;
        color: #444;
        background: none;
        border: none;
        font-weight: bold;
        transition: 0.3s;
        }
        
        .close-btn:hover {
        color: #ff4d4d;
        transform: scale(1.1);
        }
        
        /* QR Code Styling */
        .qrcode-container {
        display: flex;
        justify-content: center;
        align-items: center;
        
        }
        
        .qrcode {
        width: 100%;
        max-width: 500px;
        height: auto;
        /* border: 6px solid #333; */
        border-radius: 8px;
        }
        
        /* Button Section */
        .modal-buttons {
        display: flex;
        justify-content: center;
        gap: 12px;
        margin-top: 5px;
         margin-bottom: 3rem;
        flex-wrap: wrap;
        }
        
        .modal-buttons button {
        flex: 1;
        padding: 2rem;
        border: none;
        font-size: 5rem;
        font-weight: bold;
        max-width: 100px;
        background: #007bff;
        color: white;
        border-radius: 2rem;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .modal-buttons button:hover {
        background: #0056b3;
        
        box-shadow: 0 5px 15px rgba(0, 123, 255, 0.3);
        }
        
        /* Fade-in Animation */
        @keyframes fadeIn {
        from {
        opacity: 0;
        transform: scale(0.9);
        }
        to {
        opacity: 1;
        transform: scale(1);
        }
        }
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
   
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        </style>
        </head>
        <body>
        <div class="rectangle"></div>
        
        <!-- Loading Overlay -->
        <div id="loadingOverlay">
        <div class="loading-container">
        <div class="spinner-container">
        <div class="spinner"></div>
        <img src="veg.png" alt="Loading" class="loading-image">
        </div>
        <div class="loading-message">Loading</div>
        </div>
        </div>
        
        <!-- Header -->
        <div class="header">           
        <div class="logo-text">
        <span class="chai">CHAI</span>
        <span class="sutta">SUTTA</span>
        <span class="bar">BAR</span>
        
        <div class="open-close"></div>               
        </div>
        
        <img src="icons/phone.svg" class="phone-icon" alt="Phone">
        </div>
        
        <!-- Scrap List -->
        <div class="scrap-overlay"></div>
        <div id="scrapList">
        <div class="scrap-content">                
        <div id="closeScrap">×</div>
        <h2 style="font-size: 6rem;">Selected Items</h2>
        <div id="scrapItemsContainer">
        <div id="scrapItems"></div>
        <!-- Total price aligned below the rate column -->
        <div id="totalPrice" style="font-size: 4rem; text-align: right; margin: 2rem 0; font-weight: bold;">Total: ₹0</div>
        </div>
        <div class="button-container">
        <button id="orderScrap">Order</button>
        <button id="smartPickBtn2" class="smart-pick-btn"  title="Smart Pick"> <img src="icons/magic.svg" alt="Magic" class="button-icon"> </button>
        <button id="clearScrap">Clear</button>
        </div>                
        </div>
        </div> 
        
        <!-- Main Content Wrapper -->
        <div id="main-content">            
        <!-- Search Bar -->
        <div class="search-container">
        <div class="search-input-wrapper">
        <span id="magnifierIcon" class="search-lens">&#128270;</span>
        <input type="text" id="searchInput" maxlength="10" placeholder="item or rate" />
        <span id="clearButton" class="search-clear-btn" style="display: none;">×</span>
        </div>
        </div>
        
        <!-- Filter Container -->
        <div id="filterContainer">
        <div id="filterButtons" style="display: none;">
        <div class="filter-label">Filter by</div>
        <div id="threeButtonsContainer">
        <button class="filter-btn active" data-filter="=">=</button>
        <button class="filter-btn" data-filter="<="><=</button>
        <button class="filter-btn" data-filter=">=">>=</button>
        </div>
        </div>
        <div id="total-items-found"></div>
        </div>
        
        
        <!-- Offers -->
        <button id="offers-button"></button>
        <div id="offers-container" class="offer-container"></div>
        <button id="toggle-cart">Offer Cart (0)</button>
        
        
        <!-- Menu -->
        <div id="menu">
        <button id="scrapButton">
        <img src="icons/food.svg" class="invert-icon" alt="Edit Icon" width="40" height="40">
        <div class="counter-badge"></div>
        </button>
        
        
        </div>
        </div>
        
        <div class="feedback-message"></div>
        
        <!-- Footer Container -->
        <div class="footer-container">
        <!-- Footer -->
        <div class="footer">
        <div class="address">Opp. Petrol Pump, Kotkapura Road</div>
        <div class="address">Bagha Purana (Moga), Punjab</div>
        <div class="phone">
        <a href="tel:+919112400010">91124-00010</a> &nbsp; 📞 &nbsp;
        <a href="tel:+919023406002">90234-06002</a>
        </div>
        </div>
        
        <!-- Counter Section -->
        <div id="counterContainer">
        <div id="visitorCounter">👤 <span>0000</span> Users</div>
        <div id="viewsCounter">👁 <span>0000</span> Views</div>
        </div>
        </div>
        
        
        
        
        <!-- Social Container -->
        <div class="social">
        <div id="sidebar">
        <a id="delivery-link" href="#" target="_blank"><img src="sidebar/delivery.png" alt="Delivery number" class="logo"></a>
        <a id="whatsapp-link" href="#" target="_blank"><img src="sidebar/whatsapp.png" alt="Chat on WA" class="logo"></a>
        <a id="phone-link" href="#" target="_blank"><img src="sidebar/phone.png" alt="Phone" class="logo"></a>
        <a href="https://maps.app.goo.gl/AhjPPKMp7NJvBphDA" target="_blank"><img src="sidebar/location.png" alt="Location" class="logo"></a>
        <a href="https://www.facebook.com/p/Chai-Sutta-Bar-open-close-61553478237898/" target="_blank"><img src="sidebar/facebook.png" alt="Facebook" class="logo"></a>
        <a href="https://www.instagram.com/chaisuttabar_baghapurana/?hl=en" target="_blank"><img src="sidebar/insta.png" alt="Instagram" class="logo"></a>
        </div>
        </div>
        
        
        <div id="offer-cart" style="display: none;">
        <div class="offers-content">                        
        <div id="closeOffer">×</div>
        <h2 style="font-size: 6rem;">Selected Offers</h2>
        <div id="cart-items"></div>
        <div id="totalOffers" style="font-size: 4rem; text-align: right; margin: 2rem 0; font-weight: bold;">Total Offers: 0</div>
        <div class="button-container">
        <button id="order-offers" class="order-btn">Order</button>
        <button id="clear-offers" class="clear-btn">Clear</button>
        </div>
        </div>
        </div>
        
        <!-- Development Button -->
        <button id="devFill" style="position: fixed; bottom: 15px; left: 17px; z-index: 9999; padding: 1rem; background: #ff4444; color: white; border: none; border-radius: 5px;">
        DEV
        </button>
        
        <script>
        
        
        
        
        
        
        // temp disable offer cart button
        document.getElementById("toggle-cart").style.display = "none"; // Hide
        
        // google script URL
        const scriptUrl = "https://script.google.com/macros/s/AKfycbzEjqDlAhzGNmTn7M81p6_POCCvhgbT1UlCQKJIPZ9TNgdGGTikxB8EDnNSc99LMym5Qg/exec";
        
        //Disable context menu, cut-copy-paste
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('copy', event => event.preventDefault());
        document.addEventListener('cut', event => event.preventDefault());
        document.addEventListener('paste', event => event.preventDefault());
        
        // Declarations
        let cachedOrderNumber = null;                    
        
        
        function showFeedback(message) {
        const feedback = document.querySelector('.feedback-message');
        feedback.textContent = message;
        feedback.style.display = 'block';
        setTimeout(() => {
        feedback.style.display = 'none';
        }, 1000);
        }
        
        
        function updateScreenSize() {
        const width = window.innerWidth;
        const height = window.innerHeight;
        
        const header = document.querySelector('.header');
        
        // If width is greater than or equal to height, make header scrollable
        if (width >= height) {
        header.classList.add('scrollable'); // Make header scrollable
        } else {
        header.classList.remove('scrollable'); // Keep header fixed
        }
        }                    
        // Listen for window resizing
        window.addEventListener('resize', updateScreenSize);                    
        // Call the function initially to set the correct behavior based on current screen size
        updateScreenSize();
        
        
        
        async function loadReplacements() {
        try {
        const response = await fetch(`${scriptUrl}?sheet=replace`);
        const data = await response.json();
        
        SEARCH_REPLACEMENTS = data.slice(1).reduce((acc, row) => {
        if (row.length >= 2) {
        // Split column A by commas and process each word separately
        const words = String(row[0]).split(',').map(word => word.trim()).filter(word => word);
        
        const isGurmukhi = words.some(word => /[\u0A00-\u0A7F]/.test(word));
        
        const replacements = isGurmukhi
        ? String(row[1]).trim()  // Preserve exact Gurmukhi
        : String(row[1]).toLowerCase().trim();
        
        words.forEach(original => {
        if (original && replacements) {
        acc[isGurmukhi ? original : original.toLowerCase()] = replacements;
        }
        });
        }
        return acc;
        }, {});
        
        
        console.log('Final replacements:', SEARCH_REPLACEMENTS);
        
        } catch (error) {
        console.error('Error:', error);
        SEARCH_REPLACEMENTS = {
        'cofee': 'coffee',
        'coofe': 'coffee',
        };
        }
        }                    
        // Initialize when page loads
        loadReplacements();
        
        
        
        let selectedFilter = "="; // Default to "="                                        
        function filterMenuItems(searchQuery) {
        const menuDiv = document.getElementById('menu');
        if (!menuDiv) return;
        
        
        const menuItems = document.querySelectorAll('.menu-item');
        const categoryHeaders = document.querySelectorAll('.category-header');
        const categoryItems = document.querySelectorAll('.category-items');
        
        let totalVisibleItems = 0;
        
        
        const normalizedSearchQuery = searchQuery.trim().toLowerCase();
        const isNumberSearch = /^\d+$/.test(normalizedSearchQuery); // Check if the search query is a number                        
        
        // Show/hide filter buttons based on whether the search query is a number
        const filterButtons = document.getElementById('filterButtons');
        if (isNumberSearch) {
        filterButtons.style.display = 'flex'; // Show filter buttons
        } else {
        filterButtons.style.display = 'none'; // Hide filter buttons
        }
        
        // Get the selected filter type (=, <=, >=)
        // Use the globally selected filter type
        const filterType = selectedFilter;
        
        
        // Convert the search query to a number
        const searchNumber = isNumberSearch ? parseInt(normalizedSearchQuery, 10) : null;
        
        categoryHeaders.forEach((header, index) => {
        const categoryItem = categoryItems[index];
        const itemsInCategory = categoryItem.querySelectorAll('.menu-item');
        
        // Access the header's left and right parts (columns)
        const leftPart = header.querySelector('.left')?.textContent.trim().toLowerCase() || '';
        const rightPart = header.querySelector('.right')?.textContent.trim().toLowerCase() || '';
        
        // Combine the header text for searching
        const headerText = `${leftPart} ${rightPart}`.trim();
        
        // Debug: Log the header text and split words
        console.log("Header Text:", headerText);
        console.log("Header Words:", headerText.split(/[\s,]+/).filter(word => word.length > 0));
        
        // Check if the header matches the search query
        const isNumeric = !isNaN(normalizedSearchQuery); // Check if the search query is numeric
        
        const headerMatches = !isNumeric && headerText.split(' ').some(word => {
        const splitWords = word.split('('); 
        return splitWords.some(part => part.startsWith(normalizedSearchQuery));
        });
        
        
        let hasVisibleItemsInCategory = false;
        
        itemsInCategory.forEach(item => {
        const colABElement = item.querySelector('.colAB');
        const colCDEElement = item.querySelector('.colCDE');
        const itemTextAB = colABElement ? colABElement.textContent.trim().toLowerCase() : '';
        const itemTextCDE = colCDEElement ? colCDEElement.textContent.trim().toLowerCase() : '';
        
        let itemMatches = itemTextAB.includes('ml') || itemTextCDE.includes('ml') ? false : false;
        
        if (isNumberSearch) {
        // Extract numbers from the last three columns (colCDE)
        const numbersInCDE = itemTextCDE.match(/\d+/g) || [];
        itemMatches = numbersInCDE.some(numberStr => {
        const number = parseInt(numberStr, 10);
        switch (filterType) {
        case '=':
        return number === searchNumber;
        case '<=':
        return number <= searchNumber;
        case '>=':
        return number >= searchNumber;
        default:
        return false;
        }
        
        });                      
        } else {
        // Otherwise, check start-with words from all 5 columns (A, B, C, D, E)
        itemMatches = itemTextAB.split(' ').some(word => {
        const splitWords = word.split('('); 
        return splitWords.some(part => part.startsWith(normalizedSearchQuery));
        }) || itemTextCDE.split(' ').some(word => {
        const splitWords = word.split('('); 
        return splitWords.some(part => part.startsWith(normalizedSearchQuery));
        });
        }
        
        if (headerMatches || itemMatches) {
        totalVisibleItems++;                                    
        item.style.display = 'block';
        hasVisibleItemsInCategory = true;
        hasVisibleItems = true;
        item.style.borderBottom = ''; // Reset border-bottom for all items
        
        } else {
        item.style.display = 'none';
        }
        });
        
        // Adjust the header display and styling based on matches
        if (headerMatches || hasVisibleItemsInCategory) {
        header.style.display = 'flex';
        categoryItem.style.display = 'block';
        header.classList.add('visible-border');
        categoryItem.classList.add('visible-border');                                
        header.style.fontSize = '6rem';  // Set font size for expanded header
        header.querySelector('.right').style.display = 'inline';  // Show second column
        } else {                                
        header.style.display = 'none';
        categoryItem.style.display = 'none';
        header.classList.remove('visible-border'); // Ensure these lines exist
        categoryItem.classList.remove('visible-border');
        header.querySelector('.right').style.display = 'none';  // Hide second column
        }
        
        // Now handle the last visible item in the category
        const visibleItems = Array.from(itemsInCategory).filter(item => item.style.display === 'block');
        if (visibleItems.length > 0) {    
        const lastVisibleItem = visibleItems[visibleItems.length - 1];
        lastVisibleItem.style.borderBottom = 'none'; // Remove border from the last visible item
        lastVisibleItem.style.marginBottom = '2rem'; // Add this line
        }
        
        
        // Offers search code
        const offersContainer = document.getElementById('offers-container');
        offersContainer.innerHTML = ''; // Clear previous results
        
        const searchWords = normalizedSearchQuery.toLowerCase().split(/\s+/); // Split search query into words
        
        
        const matchedOffers = offersData.filter(offer => {
        if (searchQuery.trim() === '') return true; // Include all offers when search is empty
        const titleWords = offer[1].toLowerCase().split(/\s+/);
        const descWords = offer[2].toLowerCase().split(/\s+/);
        return searchWords.some(searchWord => 
        titleWords.some(word => word.startsWith(searchWord)) || 
        descWords.some(word => word.startsWith(searchWord))
        );
        });
        
        if (matchedOffers.length > 0) {
        offersContainer.innerHTML = matchedOffers.map(offer => {
        const offerText = `🎊\n*${offer[1]}*\n(${formatDate(offer[0])} ${offer[3] ? `to ${formatDate(offer[3])}` : ''})\n${offer[2]}\n〰️〰️〰️〰️〰️〰️〰️〰️〰`;
        
        return `
        <div class="offer-item" style="position: relative;">
        
        <button class="add-offer-btn" 
        data-start="${offer[0]}" 
        data-end="${offer[3] || ''}"
        data-allow-once="${offer[4] || 'No'}" 
        data-dependencies="${offer[5] || 'No'}">
        Add
        </button>
        <h2 class="offer-title">${offer[1]}</h2>
        <p class="offer-dates">${formatDate(offer[0])} ${offer[3] ? `to ${formatDate(offer[3])}` : ''}</p>
        <p class="offer-description">${offer[2]}</p>
        </div>
        `;
        }).join('');
        offersContainer.style.display = 'grid';
        offersButton.querySelector('.arrow').textContent = '▲';
        } else {
        offersContainer.style.display = 'none';
        offersButton.querySelector('.arrow').textContent = '▼'
        }
        
        // Update offers button counter dynamically
        const arrow = offersButton.querySelector('.arrow').outerHTML;
        offersButton.innerHTML = `${matchedOffers.length} Offer${matchedOffers.length !== 1 ? 's' : ''} Available ${arrow}`;
        
        });
        
        const totalItemsDiv = document.getElementById('total-items-found');
        
        if (searchQuery.length === 0) {
        totalItemsDiv.style.display = 'none'; // Hide when search box is empty
        updateOfferAddButtons();
        } else {
        if (totalVisibleItems > 0) {
        // Check if totalVisibleItems is 1 (singular) or more (plural)
        totalItemsDiv.textContent = `${totalVisibleItems} ${totalVisibleItems === 1 ? 'item' : 'items'}`;
        totalItemsDiv.style.color = '#00FF00'; // Green for visibility
        } else {
        if (filterButtons.style.display === 'none') {
        totalItemsDiv.textContent = 'No menu item found';
        } else {
        totalItemsDiv.textContent = 'No item';
        }
        
        totalItemsDiv.style.color = '#ff4d4d'; // Red for visibility
        }
        totalItemsDiv.style.display = 'block'; // Show only when search is not empty
        }  
        }
        
        // Add event listener to filter buttons
        document.querySelectorAll('.filter-btn').forEach(button => {
        button.addEventListener('click', () => {
        // Remove active class from all buttons
        document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
        
        // Add active class to the clicked button
        button.classList.add('active');
        
        // Update the selected filter type
        selectedFilter = button.getAttribute('data-filter');
        
        // Trigger filtering
        const searchQuery = document.getElementById('searchInput').value.trim();
        filterMenuItems(searchQuery);
        });
        });
        
        
        // Function to reset headers and hide the second column when search is cleared
        function resetHeaders() {
        document.querySelectorAll('.category-header').forEach(header => {
        header.style.fontSize = '7rem';  // Reset to collapsed size
        header.querySelector('.right').style.display = 'none';  // Hide second column
        header.classList.remove('visible-border'); 
        
        });
        
        document.querySelectorAll('.category-items').forEach(container => {
        container.style.display = 'none';  // Collapse all categories
        container.classList.remove('visible-border'); 
        
        });
        }
        
        
        // Get references to the elements
        const searchInput = document.getElementById('searchInput');
        const clearButton = document.getElementById('clearButton');
        // The magnifierIcon remains always visible, so no toggling is required here
        
        // Modify the search handler like this
        searchInput.addEventListener('input', (e) => {
        let query = e.target.value;
        
        // Validate the input to allow only English or Gurmukhi characters
        const regex = /^[a-zA-Z0-9\u0A00-\u0A7F]*$/;
        if (!regex.test(query)) {
        e.target.value = query.slice(0, -1);
        return;
        }
        
        // 1. Convert replacements to array and sort by key length (longest first)
        const sortedReplacements = Object.entries(SEARCH_REPLACEMENTS)
        .sort((a, b) => b[0].length - a[0].length);
        
        // 2. Process replacements in sorted order
        sortedReplacements.forEach(([original, replacement]) => {
        const escapedOriginal = original.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        query = query.replace(
        new RegExp(escapedOriginal, 'g'), 
        replacement
        );
        });
        
        // 3. Pass to filter
        filterMenuItems(query);
        
        // Existing clear button logic
        if (query.length > 0) {
        clearButton.style.display = 'block';
        } else {
        clearButton.style.display = 'none';
        resetHeaders();
        }
        
        // NEW FIX (add these 4 lines at the very end):
        if (e.target.value === '' && offersContainer.style.display === 'grid') {
        offersContainer.style.display = 'none';
        offersButton.querySelector('.arrow').textContent = '▼';
        }
        
        }); 
        
        
        
        // Clear Button Event Listener
        clearButton.addEventListener('click', () => {
        searchInput.value = '';              // Clear input field
        clearButton.style.display = 'none';  // Hide the clear button
        
        // Reset filtering and collapse categories (your existing logic)
        filterMenuItems('');
        
        // Collapse all category items (your existing logic)
        document.querySelectorAll('.category-items').forEach(container => {
        container.style.display = 'none';
        });
        document.querySelectorAll('.category-header').forEach(header => {
        header.classList.remove('expanded');
        });
        
        // Focus back on the search box
        searchInput.focus();
        resetHeaders();
        });
        
        
        
        
        // Fetch data from Google Script URL
        fetch(scriptUrl)
        .then(response => response.json())
        .then(data => {
        const menuDiv = document.getElementById('menu');
        let currentCategory = null;
        
        // Store all category item containers for collapsing
        const categoryItemsContainers = [];
        
        console.log("Fetched data:", data); // Debugging data fetching
        
        data.forEach(row => {
        const mergedColAB = row.columnB.trim() !== "" ? row.columnA + " (" + row.columnB + ")" : row.columnA;
        
        // Apply different colors to column C, D, and E and join them with " / "
        // Original code where you create colCDEElement:
        const mergedcolCDE = [
        row.columnC ? `<span style="color: #40E0D0;" data-column="C">${row.columnC}</span>` : '',
        row.columnD ? `<span style="color: #00FF7F;" data-column="D">${row.columnD}</span>` : '',
        //                            row.columnE ? `<span style="color: #E6E6FA;" data-column="E">${row.columnE}</span>` : ''
        row.columnE ? `<span style="color: #F8BBD0;" data-column="E">${row.columnE}</span>` : ''
        
        ].filter(col => col).join(' / ');
        
        const colCDEElement = document.createElement('span');
        colCDEElement.classList.add('colCDE');
        colCDEElement.innerHTML = mergedcolCDE;  // This now contains data-column attributes
        
        console.log("Merged colCDE:", mergedcolCDE); // Debugging merged colCDE
        
        // Check if columnC is empty or is a category header
        const isCategory = (String(row.columnC).trim() === "" || (isNaN(String(row.columnC)) && String(row.columnC).trim() !== "-"));
        
        console.log("Is category?", isCategory); // Debugging category check
        
        if (isCategory) {
        const categoryHeaderDiv = document.createElement('div');
        categoryHeaderDiv.classList.add('category-header');
        
        // MODIFIED: Store individual column values as data attributes
        categoryHeaderDiv.dataset.columnC = row.columnC || '';
        categoryHeaderDiv.dataset.columnD = row.columnD || '';
        categoryHeaderDiv.dataset.columnE = row.columnE || '';
        
        const leftPart = document.createElement('span');
        leftPart.classList.add('left');
        leftPart.textContent = mergedColAB;
        
        const rightPart = document.createElement('span');
        rightPart.classList.add('right');
        rightPart.innerHTML = mergedcolCDE;  // Use innerHTML to render the colored spans
        
        categoryHeaderDiv.appendChild(leftPart);
        categoryHeaderDiv.appendChild(rightPart);
        
        const categoryItemsDiv = document.createElement('div');
        categoryItemsDiv.classList.add('category-items');
        
        // Toggle category items visibility on click
        categoryHeaderDiv.addEventListener('click', () => {
        // Reset all other headers to default collapsed size and show only the first column
        document.querySelectorAll('.category-header').forEach(header => {
        header.style.fontSize = '7rem'; // Set collapsed size
        header.querySelector('.right').style.display = 'none'; // Ensure second column is hidden
        header.classList.remove('visible-border'); // Add this line
        });
        
        document.querySelectorAll('.category-items').forEach(container => {
        if (container !== categoryItemsDiv) {
        container.style.display = 'none';
        container.classList.remove('visible-border'); // Add this line
        }
        });
        
        // Toggle visibility and adjust styles accordingly
        if (categoryItemsDiv.style.display === 'none' || categoryItemsDiv.style.display === '') {
        categoryItemsDiv.style.display = 'block';
        categoryHeaderDiv.style.fontSize = '6rem';
        categoryHeaderDiv.querySelector('.right').style.display = 'inline'; // Show right column
        categoryHeaderDiv.classList.add('visible-border');
        categoryItemsDiv.classList.add('visible-border');
        } else {
        categoryItemsDiv.style.display = 'none';
        categoryHeaderDiv.classList.remove('visible-border');
        categoryItemsDiv.classList.remove('visible-border');
        }
        });
        
        // Initial state: Increase font size for collapsed categories and hide second column
        categoryHeaderDiv.style.fontSize = '7rem';
        categoryHeaderDiv.querySelector('.right').style.display = 'none';
        
        menuDiv.appendChild(categoryHeaderDiv);
        menuDiv.appendChild(categoryItemsDiv);
        
        categoryItemsContainers.push(categoryItemsDiv);                    
        currentCategory = categoryItemsDiv;
        } else if (currentCategory) {
        const menuItemDiv = document.createElement('div');
        menuItemDiv.classList.add('menu-item');
        menuItemDiv.style.marginBottom = '0';
        
        const lineDiv = document.createElement('div');
        lineDiv.classList.add('menu-item-line');
        
        const colABElement = document.createElement('span');
        colABElement.classList.add('colAB');
        colABElement.textContent = mergedColAB;
        
        const colCDEElement = document.createElement('span');
        colCDEElement.classList.add('colCDE');
        colCDEElement.innerHTML = mergedcolCDE;  // Use innerHTML to render the colored spans
        
        lineDiv.appendChild(colABElement);
        lineDiv.appendChild(colCDEElement);                        
        menuItemDiv.appendChild(lineDiv);
        currentCategory.appendChild(menuItemDiv);
        }
        });
        
        categoryItemsContainers.forEach(container => {
        container.style.display = 'none';
        });
        
        document.querySelector(".search-container").style.display = "block";
        
        document.querySelector('.footer-container').style.display = 'block'; // Show footer
        
        
        // Remove the loading overlay after the data is fetched and processed
        document.getElementById('loadingOverlay').style.display = 'none';
        })
        .catch(error => {
        console.error("Error fetching data:", error);
        document.getElementById('loadingOverlay').innerHTML = "<div class='loading-message'>Error loading menu</div>";
        });
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        // Modify toggleScrapList function
        function toggleScrapList() {
        const overlay = document.querySelector('.scrap-overlay');
        const scrapList = document.getElementById('scrapList');
        const offerCartElement = document.getElementById('offer-cart');
        
        
        // Check if both carts are empty
        const hasScrapItems = scrapItems.length > 0;
        const hasCartItems = offerCart.length > 0;
        
        if (!hasScrapItems && !hasCartItems) {
        if (isWarningVisible) {
        // Close warning if it's already visible
        closeScrapList();
        isWarningVisible = false;
        } else {
        // Show warning if not visible
        showEmptyWarningInScrapList();
        isWarningVisible = true;
        }
        return;
        }
        
        
        // Toggle visibility based on content
        scrapVisible = !scrapVisible;
        
        // Show/hide scrap list only if it has items
        scrapList.style.display = hasScrapItems && scrapVisible ? 'flex' : 'none';
        
        // Show/hide offer cart only if it has items
        offerCartElement.style.display = hasCartItems && scrapVisible ? 'block' : 'none';
        
        // Update positions if showing
        if (scrapVisible) {
        overlay.style.display = 'block';
        document.body.style.overflow = 'hidden';
        updateCartPosition();
        scrapListObserver.observe(scrapList);
        } else {
        overlay.style.display = 'none';
        document.body.style.overflow = '';
        scrapListObserver.unobserve(scrapList);
        }
        isWarningVisible = false;
        }
        
        // Add overlay click handler
        document.querySelector('.scrap-overlay').addEventListener('click', () => {
        closeScrapList();
        closeOfferCart();
        });
        
        
        
        // Empty-warning
        function showEmptyWarningInScrapList() {
        const scrapList = document.getElementById('scrapList');
        const scrapItemsContainer = document.getElementById('scrapItems');
        const totalPrice = document.getElementById('totalPrice');
        const buttonContainer = document.querySelector('.button-container');
        const h2 = scrapList.querySelector('h2');
        
        // Update the heading
        h2.textContent = 'No Item!';
        h2.style.color = '#d32f2f';
        
        // Display scrap list overlay
        scrapList.style.display = 'flex';
        document.querySelector('.scrap-overlay').style.display = 'block';
        document.body.style.overflow = 'hidden';
        scrapVisible = true;
        
        // Insert empty warning message
        scrapItemsContainer.innerHTML = `
        <div class="empty-warning">
        <img src="empty.svg" alt="Cart Icon" width="60" height="60">
        
        <p class="empty-text"><strong>Start adding items:</strong></p>
        <p class="empty-text">Tap the <strong>Rate</strong> of items</p>
        <p class="empty-text">OR</p>
        <p class="empty-text">use <strong>Magic Pick</strong> button.</p>
        
        <div class="button-container-center">
        <button id="smartPickBtn" class="smart-pick-btn">
        
        <img src="icons/magic.svg" alt="Magic" class="button-icon">
        Magic 
        Pick
        <img src="icons/magic.svg" alt="Magic" class="button-icon">
        </button>
        </div>
        
        </div>
        `;
        
        // Hide irrelevant elements
        totalPrice.style.display = 'none';
        buttonContainer.style.display = 'none';
        isWarningVisible = true;
        
        // Add event listener to Smart Pick button
        document.getElementById('smartPickBtn').addEventListener('click', addRandomItem);
        document.getElementById('smartPickBtn2').addEventListener('click', addRandomItem);
        }
        
        
        
        
        
        function showOrderListWarning() {                            
        let existingModal = document.getElementById('orderListWarningModal');
        if (existingModal) {
        existingModal.remove(); 
        isWarningVisible = false;
        return;
        }
        
        let modal = document.createElement('div');
        modal.id = 'orderListWarningModal';
        modal.className = 'modal-overlay';
        
        let contentEnglish = `
        <p><strong>Order list is empty.</strong></p>
        <ul>
        <li>Tap <b>rate</b> to add an item. In the order list, you can <b>increase, decrease or remove</b> items.</li>
        </ul>
        `;
        
        let contentPunjabi = `
        <p><strong>ਆਰਡਰ ਸੂਚੀ ਖਾਲੀ ਹੈ।</strong></p>
        <ul>
        <li>ਚੀਜ਼ਾਂ ਪਾਉਣ ਲਈ <b>ਰੇਟ</b> ਛੂਹੋ। ਆਰਡਰ ਸੂਚੀ ਵਿੱਚੋਂ, ਤੁਸੀਂ ਚੀਜ਼ਾਂ <b>ਘਟਾ, ਵਧਾ ਜਾਂ ਕੱਢ</b> ਸਕਦੇ ਹੋ</li>
        </ul>
        `;
        
        modal.innerHTML = `
        <div class="modal-content">
        <span class="close-button">&times;</span>
        <div id="modalText">${contentEnglish}</div>
        <div id="toggleContainer" class="toggle-container">
        <div id="toggleButton" class="split-toggle">
        <div id="englishSide" class="toggle-half active">Eng</div>
        <div id="punjabiSide" class="toggle-half">ਪੰਜਾਬੀ</div>
        </div>
        </div>
        </div>
        `;
        
        document.body.appendChild(modal);
        
        const toggleButton = document.getElementById('toggleButton');
        const modalText = document.getElementById('modalText');
        const englishSide = document.getElementById('englishSide');
        const punjabiSide = document.getElementById('punjabiSide');
        let isEnglish = true;
        
        toggleButton.addEventListener('click', () => {
        isEnglish = !isEnglish;
        if (isEnglish) {
        modalText.innerHTML = contentEnglish;
        englishSide.classList.add('active');
        punjabiSide.classList.remove('active');
        } else {
        modalText.innerHTML = contentPunjabi;
        punjabiSide.classList.add('active');
        englishSide.classList.remove('active');
        }
        });
        
        function closeModal() {
        modal.remove();
        isWarningVisible = false;
        
        // Add this line to ensure scrap overlay is hidden
        document.querySelector('.scrap-overlay').style.display = 'none';
        }
        
        const autoCloseTimer = setTimeout(closeModal, 60000);
        
        modal.querySelector('.close-button').addEventListener('click', () => {
        clearTimeout(autoCloseTimer);
        closeModal();
        });
        
        modal.addEventListener('click', (event) => {
        if (event.target === modal) {
        clearTimeout(autoCloseTimer);
        closeModal();
        }
        });
        
        isWarningVisible = true;
        }
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        let scrapItems = [];
        let scrapVisible = false;                                                        
        // Add these JavaScript modifications
        
        // Add variable to track warning visibility
        let isWarningVisible = false;
        
        // Scrap Button Functionality
        document.getElementById('scrapButton').addEventListener('click', function(e) {
        // Prevent event from bubbling up to document listener
        e.stopPropagation();
        toggleScrapList();
        });
        
        function updateScrapButtonStatus() {
        const scrapButton = document.getElementById('scrapButton');
        const scrapButtonImg = document.querySelector('#scrapButton img');
        
        // Check if either scrapItems or offerCart has items
        const hasItems = scrapItems.length > 0 || offerCart.length > 0;
        
        scrapButton.classList.toggle('has-items', hasItems);
        
        // Optional: Add subtle pulse animation when items are added
        if (hasItems) {
        scrapButton.style.animation = 'pulse-green 1s ease';
        setTimeout(() => scrapButton.style.animation = '', 1000);
        }
        }
        
        
        // Add this to your existing function
        function handleScrapItemsChange() {
        updateScrapListDisplay();
        updateScrapButtonStatus();
        updateScrapCounter();
        updateOfferAddButtons();
        
        // New: Remove dependent offers when scrap is empty
        if (scrapItems.length === 0) {
        const dependentOffersRemoved = offerCart.filter(group => group.dependent);
        offerCart = offerCart.filter(group => !group.dependent);
        
        if (dependentOffersRemoved.length > 0) {
        showFeedback('Dependent offers removed');
        updateCartDisplay();
        updateOfferAddButtons();
        updateScrapButtonStatus();
        }
        }
        updateCartDisplay(); 
        }
        
        
        // Add this function to update the counter
        function updateScrapCounter() {
        const counter = document.querySelector('#scrapButton .counter-badge');
        counter.textContent = scrapItems.length > 0 ? scrapItems.length : ''; 
        counter.style.display = scrapItems.length > 0 ? 'inline-block' : 'none';
        
        
        // Add animation when items are added
        if(scrapItems.length > 0) {
        counter.style.transform = 'scale(1.2)';
        setTimeout(() => counter.style.transform = 'scale(1)', 200);
        }
        } 
        
        
        
        
        
        // Add items to scrap list when clicking rates
        document.getElementById('menu').addEventListener('click', (e) => {
        
        const rateElement = e.target.closest('.colCDE span, .colCDE');
        if (rateElement && rateElement.textContent.match(/₹?\d+/)) {
        const menuItemLine = rateElement.closest('.menu-item-line');
        
        // Get which column was clicked (C/D/E)
        const column = rateElement.getAttribute('data-column');
        
        // Get category header
        const categoryHeader = menuItemLine.closest('.menu-item')
        .closest('.category-items')
        .previousElementSibling;
        
        // Get the specific column value from category header
        const columnValue = categoryHeader.dataset[`column${column}`]?.trim();
        
        // Build category name (without column value)
        const categoryName = categoryHeader.querySelector('.left').textContent.split('(')[0].trim();
        
        // Build item name
        let itemName = menuItemLine.querySelector('.colAB').textContent.split('(')[0].trim();
        
        // Add column value to item name if it exists
        if (columnValue) {
        itemName += ` (${columnValue})`;
        }
        
        // Combine names
        const combinedName = `${categoryName} - ${itemName}`;
        
        // Rest of your existing click handling code...
        const clickedRate = rateElement.textContent.replace('₹', '').trim();
        
        if (clickedRate.includes('/')) {
        showTapFeedbackInCenter('❌');
        playBeep(600, 0.15);
        } else {
        animateRateMovement(rateElement);                                
        scrapItems.push({ 
        name: combinedName, 
        rate: clickedRate 
        });
        }
        
        
        updateScrapListDisplay();
        }
        handleScrapItemsChange();
        });
        
        // Rate add animation
        function animateRateMovement(sourceElement) {
        const scrapButton = document.getElementById('scrapButton');                        
        
        // Get positions of the source element and the scrap button
        const sourceRect = sourceElement.getBoundingClientRect();
        const targetRect = scrapButton.getBoundingClientRect();                        
        
        // Create a floating clone of the rate element
        const floatingClone = document.createElement('div');
        floatingClone.textContent = sourceElement.textContent;
        floatingClone.style.position = 'fixed';
        floatingClone.style.left = `${sourceRect.left}px`;
        floatingClone.style.top = `${sourceRect.top}px`;
        floatingClone.style.fontSize = '16px';
        floatingClone.style.fontWeight = 'bold';
        floatingClone.style.background = '#ffcc00';
        floatingClone.style.padding = '5px 10px';
        floatingClone.style.borderRadius = '5px';
        floatingClone.style.boxShadow = '0px 2px 5px rgba(0,0,0,0.2)';
        floatingClone.style.transition = 'transform 0.5s ease-out, opacity 0.5s ease-out';
        floatingClone.style.zIndex = '1000';
        
        document.body.appendChild(floatingClone);                        
        
        // Force repaint before moving
        requestAnimationFrame(() => {
        floatingClone.style.transform = `translate(${targetRect.left - sourceRect.left}px, ${targetRect.top - sourceRect.top}px) scale(0.5)`;
        floatingClone.style.opacity = '0';
        });                        
        
        // Remove the element after animation
        setTimeout(() => {
        floatingClone.remove();
        }, 500);
        }
        
        
        // Miss rate indication
        function showTapFeedbackInCenter(symbol) {
        const feedbackElement = document.createElement('div');
        feedbackElement.textContent = symbol;
        feedbackElement.style.position = 'fixed';
        
        // Center horizontally and vertically
        feedbackElement.style.left = `${window.innerWidth / 2}px`;
        feedbackElement.style.top = `${window.innerHeight / 2}px`;
        
        feedbackElement.style.transform = 'translate(-50%, -50%) scale(0)'; // Center and start small
        feedbackElement.style.fontSize = '6rem';
        feedbackElement.style.fontWeight = 'bold';
        feedbackElement.style.color = 'red';
        feedbackElement.style.transition = 'transform 0.3s ease-out, opacity 0.5s ease-out';
        feedbackElement.style.zIndex = '1000';
        
        document.body.appendChild(feedbackElement);
        
        // Trigger zoom-in effect
        requestAnimationFrame(() => {
        feedbackElement.style.transform = 'translate(-50%, -50%) scale(2)';
        });
        
        // Remove feedback after animation
        setTimeout(() => {
        feedbackElement.remove();
        }, 500);
        }
        
        // Miss tone
        let audioCtx; // Declare outside to initialize later
        let oscillator;
        
        document.addEventListener("click", () => {
        if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        } else if (audioCtx.state === "suspended") {
        audioCtx.resume();
        }
        }, { once: true }); // Runs only once
        
        function playBeep(frequency, duration) {
        if (!audioCtx) {
        console.warn("AudioContext not initialized yet. User interaction required.");
        return;
        }
        
        if (audioCtx.state === "suspended") {
        audioCtx.resume().then(() => {
        generateBeep(frequency, duration);
        });
        } else {
        generateBeep(frequency, duration);
        }
        }
        
        function generateBeep(frequency, duration) {
        if (oscillator) {
        oscillator.stop(); // Stop previous beep before starting a new one
        }
        
        oscillator = audioCtx.createOscillator();
        let gainNode = audioCtx.createGain();
        
        oscillator.type = "sine";
        oscillator.frequency.setValueAtTime(frequency, audioCtx.currentTime);
        gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
        
        oscillator.connect(gainNode);
        gainNode.connect(audioCtx.destination);
        
        oscillator.start();
        setTimeout(() => {
        oscillator.stop();
        }, duration * 1000);
        }
        
        
        
        
        
        
        
        
        
        function updateScrapListDisplay() {
        const scrapContainer = document.getElementById('scrapItems');
        // const totalPrice = document.getElementById('totalPrice');                       
        const buttonContainer = document.querySelector('.button-container');
        const scrapList = document.getElementById('scrapList');
        const h2 = scrapList.querySelector('h2');
        
        
        
        if (scrapItems.length > 0) {
        // Reset h2 text when items are present
        h2.textContent = 'Selected Items';
        // totalPrice.style.display = 'block';
        buttonContainer.style.display = 'flex';
        
        }
        
        // Step 1: Combine duplicate items and calculate quantities
        const itemMap = new Map();
        scrapItems.forEach((item) => {
        const key = `${item.name}-${item.rate}`;
        if (itemMap.has(key)) {
        itemMap.get(key).qty++;
        } else {
        itemMap.set(key, { ...item, qty: 1 });
        }
        });
        
        // Step 2: Convert map values to array and sort alphabetically by item name
        const sortedItems = Array.from(itemMap.values()).sort((a, b) => 
        a.name.localeCompare(b.name)
        );
        
        // Step 3: Generate HTML for sorted items with quantity stepper
        scrapContainer.innerHTML = sortedItems.map((groupedItem) => `
        <div class="scrap-item">
        <div class="scrap-item-name"><strong>${groupedItem.name.replace(/\((.*?)\)/g, '<span class="column-value">($1)</span>')}</strong></div>
        <div class="scrap-item-rate">
        <div class="qty-stepper">
        <button class="decrement-btn" data-name="${groupedItem.name}" data-rate="${groupedItem.rate}">-</button>
        <span class="qty-display">${groupedItem.qty}</span>
        <button class="increment-btn" data-name="${groupedItem.name}" data-rate="${groupedItem.rate}">+</button>
        </div>
        <span> ₹${groupedItem.rate}</span>
        </div>
        <span class="delete-btn" data-name="${groupedItem.name}" data-rate="${groupedItem.rate}">✕</span>
        </div>
        `).join('');
        
        // Step 4: Update total price
        // Step 4: Calculate total quantity and total price
        const totalQuantity = sortedItems.reduce((acc, item) => acc + item.qty, 0); // Total quantity
        const totalPrice = sortedItems.reduce((acc, item) => acc + (parseFloat(item.rate) * item.qty), 0); // Total price
        
        // Step 5: Update the total price element to include total quantity
        const totalPriceElement = document.getElementById('totalPrice');
        totalPriceElement.textContent = `${totalQuantity} ${totalQuantity === 1 ? 'item' : 'items'} - Total: ₹${totalPrice.toFixed(0)}`;
        
        
        // Always reset these elements when updating display
        totalPriceElement.style.display = scrapItems.length > 0 ? 'block' : 'none';
        buttonContainer.style.display = scrapItems.length > 0 ? 'flex' : 'none';
        
        
        // Step 5: scrap-increment-button
        document.querySelectorAll('.increment-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
        e.stopPropagation();
        const name = e.target.dataset.name;
        const rate = e.target.dataset.rate;
        const currentCount = scrapItems.filter(item =>
        item.name === name && item.rate === rate
        ).length;
        
        if (currentCount < 99) {
        scrapItems.push({ name, rate });
        updateScrapListDisplay();
        updateScrapCounter();
        updateIncrementButtonState(name, rate); // Update increment button state
        updateDecrementButtonState(name, rate); // Ensure decrement button updates as well
        }
        });
        
        // Initial button state setup (when the list first loads)
        updateIncrementButtonState(btn.dataset.name, btn.dataset.rate);
        });
        
        function updateIncrementButtonState(name, rate) {
        const currentCount = scrapItems.filter(item =>
        item.name === name && item.rate === rate
        ).length;
        
        const incrementButtons = document.querySelectorAll(`.increment-btn[data-name="${name}"][data-rate="${rate}"]`);
        
        incrementButtons.forEach(btn => {
        btn.disabled = currentCount >= 99;
        });
        
        
        }
        
        // scrap-decrement-button                        
        document.querySelectorAll('.decrement-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
        e.stopPropagation();
        const name = e.target.dataset.name;
        const rate = e.target.dataset.rate;
        const currentCount = scrapItems.filter(item =>
        item.name === name && item.rate === rate
        ).length;
        
        if (currentCount === 1) {
        // Remove all instances if quantity is 1
        scrapItems = scrapItems.filter(item =>
        item.name !== name || item.rate !== rate
        );
        } else {
        // Remove last instance of this item
        let lastIndex = -1;
        for (let i = scrapItems.length - 1; i >= 0; i--) {
        if (scrapItems[i].name === name && scrapItems[i].rate === rate) {
        lastIndex = i;
        break;
        }
        }
        if (lastIndex !== -1) scrapItems.splice(lastIndex, 1);
        }
        
        updateScrapListDisplay();
        updateScrapCounter();
        updateDecrementButtonState(name, rate); // Update button state after changes
        });
        
        // Initial button state setup (when the list first loads)
        updateDecrementButtonState(btn.dataset.name, btn.dataset.rate);
        });
        
        function updateDecrementButtonState(name, rate) {
        const currentCount = scrapItems.filter(item =>
        item.name === name && item.rate === rate
        ).length;
        
        const decrementButtons = document.querySelectorAll(`.decrement-btn[data-name="${name}"][data-rate="${rate}"]`);
        
        decrementButtons.forEach(btn => {
        btn.disabled = currentCount <= 1;
        });
        }
        
        
        // scrap-delete-button
        document.querySelectorAll('.delete-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
        e.stopPropagation();
        const name = e.target.dataset.name;
        const rate = e.target.dataset.rate;
        
        // Remove the item from scrapItems
        scrapItems = scrapItems.filter(item => item.name !== name || item.rate !== rate);
        
        // Check if scrapItems is empty
        if (scrapItems.length === 0) {
        
        closeScrapList();
        showFeedback("Order list cleared"); // Show feedback message
        }
        handleScrapItemsChange();
        updateScrapListDisplay();
        });
        });
        updateCartPosition(); 
        }
        
        
        
        // Function to trim the first non-English character from a string
        function trimLeftNonEnglish(text) {
        return text.replace(/^[^A-Za-z]+/, '');
        }                    
        
        
        
        
        
        
        
        
        
        
        
        
        // Scrap-order button
        document.getElementById('orderScrap').addEventListener('click', async () => {
        if (scrapItems.length === 0) {
        showOrderListWarning();
        return;
        }                        
        
        const orderNumber = cachedOrderNumber + 1;
        
        // Group items by name and rate to calculate quantities
        const itemMap = new Map();
        scrapItems.forEach((item) => {
        const key = `${item.name}-${item.rate}`;
        itemMap.has(key) ? itemMap.get(key).qty++ : itemMap.set(key, { ...item, qty: 1 });
        });
        
        const sortedItems = Array.from(itemMap.values()).sort((a, b) => a.name.localeCompare(b.name));
        
        // Generate order text with quantities and total per row
        let orderText = sortedItems.map(item => {
        let itemTotal = item.qty * parseFloat(item.rate); // Calculate total for each row
        return item.qty > 1 
        ? `*${item.qty}* x ${trimLeftNonEnglish(item.name)} @ ₹${item.rate} - ₹${itemTotal}`
        : `*${item.qty}* x ${trimLeftNonEnglish(item.name)} - ₹${itemTotal}`;
        }).join('\n');                        
        
        // Calculate total cost
        let totalAmount = sortedItems.reduce((acc, item) => acc + (parseFloat(item.rate) * item.qty), 0);
        
        // Calculate total number of items
        let totalItems = sortedItems.reduce((acc, item) => acc + item.qty, 0);
        
        // List of food-related emojis
        let foodEmojis = ['🌶', '🫑', '🌽', '🍔', '🍟', '🍕', '🥙', '🌮', '🥗', '🍿', '🍎', '🍋', '🍓', '🍞', '🥘', '🍱', '🍧', '🍹', '👑', '☘️', '💥', '🍒', '🎁', '🎉', '🎊', '💝'];
        
        // Select a random emoji
        let randomEmoji = foodEmojis[Math.floor(Math.random() * foodEmojis.length)];
        
        let message = encodeURIComponent(
        `${randomEmoji}\n*Order No. ${orderNumber}*\n${'-'.repeat(30)}\n` +
        `${sortedItems.map(item => {
        let itemTotal = item.qty * parseFloat(item.rate);
        return item.qty > 1 
        ? `*${item.qty}* x ${trimLeftNonEnglish(item.name)} @ ₹${item.rate} - ₹${itemTotal}`
        : `*${item.qty}* x ${trimLeftNonEnglish(item.name)} - ₹${itemTotal}`;
        }).join('\n\n')}\n${'-'.repeat(30)}\n` +
        `*${totalItems}* ${totalItems > 1 ? "items" : "item"} - *₹${Math.round(totalAmount)}* only\n${'-'.repeat(30)}`
        );
        
        
        window.open(`https://wa.me/${whatsappOfferNumber}?text=${message}`, '_blank');
        
        
        // Clear the scrap list after ordering
        scrapItems = [];
        updateScrapListDisplay();
        handleScrapItemsChange();
        closeScrapList();
        showFeedback("Order sent. List cleared!"); // Optional feedback
        
        
        updateCounter('updateOrders');
        cachedOrderNumber = orderNumber;
        });
        
        // scrap-clear button
        document.getElementById('clearScrap').addEventListener('click', () => {
        const scrapList = document.getElementById('scrapList');
        const overlay = document.querySelector('.scrap-overlay');
        
        // Clear scrap items
        scrapItems = [];
        updateScrapListDisplay();
        showFeedback("Order list cleared");
        
        // Close the scrap list
        scrapList.style.display = 'none';
        scrapVisible = false;
        
        // Only hide overlay if offer cart is also empty
        if (offerCart.length === 0) {
        overlay.style.display = 'none';
        document.body.style.overflow = '';
        }
        
        handleScrapItemsChange();
        });  
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        let offersData = [];
        let offerNsg = '';
        let offerCart = [];
        // Add these variables at the top with other cart variables
        let offerCartVisible = false;
        
        // Offer Section
        function formatDate(dateString) {
        const date = new Date(dateString);
        const day = date.getDate().toString().padStart(2, '0');
        const month = date.toLocaleString('en-US', { month: 'short' });
        const year = date.getFullYear().toString().slice(-2);
        return `${day}-${month}-${year}`;
        }
        
        // Offer elements
        const offersButton = document.getElementById('offers-button');
        const offersContainer = document.getElementById('offers-container');
        
        fetch(scriptUrl + "?sheet=offer")
        .then(response => response.json())
        .then(offerData => {
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        // Filter valid offers
        const validOffers = offerData.filter(offer => {
        const startDate = new Date(offer[0]);
        const endDate = new Date(offer[3]);
        
        // Normalize time to ensure date-only comparison
        startDate.setHours(0, 0, 0, 0);
        endDate.setHours(23, 59, 59, 999); // Include the full end day
        
        return today >= startDate && today <= endDate;
        });
        
        
        offersData = validOffers;
        
        if (validOffers.length > 0) {
        offersButton.innerHTML = `${validOffers.length} Offer${validOffers.length > 1 ? 's' : ''} Available <span class="arrow">▼</span>`;
        offersButton.style.display = 'block';
        
        offersButton.addEventListener('click', () => {
        const isVisible = offersContainer.style.display === 'grid';
        offersContainer.style.display = isVisible ? 'none' : 'grid';
        offersButton.querySelector('.arrow').textContent = isVisible ? '▼' : '▲';
        
        });
        }
        
        offersContainer.innerHTML = validOffers.map(offer => {
        return `
        <div class="offer-item" style="position: relative;">
        <button class="add-offer-btn" 
        data-start="${offer[0]}" 
        data-end="${offer[3] || ''}"
        data-allow-once="${offer[4] || 'No'}" 
        data-dependencies="${offer[5] || 'No'}">
        Add
        </button>
        <h2 class="offer-title">${offer[1]}</h2>
        <p class="offer-dates">${formatDate(offer[0])} ${offer[3] ? `to ${formatDate(offer[3])}` : ''}</p>
        <p class="offer-description">${offer[2]}</p>
        </div>
        `;
        }).join('');
        updateOfferAddButtons(); // Initialize button states
        })
        .catch(error => {
        console.error('Error loading offers:', error);
        });
        
        
        
        function updateOfferAddButtons() {
        const addButtons = document.querySelectorAll('.add-offer-btn');
        addButtons.forEach(button => {
        const offerItem = button.closest('.offer-item');
        const offerTitle = offerItem.querySelector('.offer-title').textContent;
        const allowOnce = button.dataset.allowOnce === 'Yes';
        const dependencies = button.dataset.dependencies === 'Yes';
        
        // Check if offer exists in cart (regardless of quantity)
        const existsInCart = offerCart.some(item => item.title === offerTitle);
        
        button.disabled = (dependencies && scrapItems.length === 0) || 
        (allowOnce && existsInCart);
        });
        }
        
        // Modify the click handler to group by title
        document.getElementById('offers-container').addEventListener('click', function(e) {
        if (e.target.classList.contains('add-offer-btn')) {
        const button = e.target;
        const offerItem = button.closest('.offer-item');
        const offerTitle = offerItem.querySelector('.offer-title').textContent;
        const offerDescription = offerItem.querySelector('.offer-description').textContent;
        const dependencies = button.dataset.dependencies === 'Yes';
        const startDate = formatDate(button.dataset.start);
        const endDate = button.dataset.end ? formatDate(button.dataset.end) : null;
        const allowOnce = button.dataset.allowOnce === 'Yes';
        const dateString = endDate ? `${startDate} to ${endDate}` : startDate;
        
        // Check for existing offer group
        const existingGroup = offerCart.find(group => group.title === offerTitle);
        
        if (allowOnce && existingGroup) {
        showFeedback('Offer already added!');
        return;
        }
        
        if (existingGroup) {
        // Add date if it's new
        if (!existingGroup.dates.includes(dateString)) {
        existingGroup.dates.push(dateString);
        }
        existingGroup.count++;
        } else {
        // Create new group
        // When adding offers to the cart
        offerCart.push({
        title: offerTitle,
        description: offerDescription,
        dates: [dateString],
        count: 1,
        dependent: dependencies,
        allowOnce: allowOnce // Add allowOnce flag
        });
        }
        animateRateMovement(offerItem);
        showFeedback('Offer added!');
        updateOfferAddButtons();
        updateScrapButtonStatus();
        updateCartDisplay();
        
        }
        });                  
        
        
        
        // offer-button
        document.getElementById('toggle-cart').addEventListener('click', (e) => {
        e.stopPropagation();
        if (offerCart.length === 0) {
        showOrderListWarning();
        return;
        }
        toggleOfferCart();
        });
        
        // Modified toggle cart function
        function toggleOfferCart() {
        const offerCart = document.getElementById('offer-cart');
        
        if (offerCart.length === 0) {
        showOrderListWarning();
        offerCart.style.display = 'none';
        offerCartVisible = false;
        return;
        }
        
        offerCartVisible = !offerCartVisible;
        offerCart.style.display = offerCartVisible ? 'block' : 'none';
        }
        
        
        
        
        
        // Update cart display with stepper
        function updateCartDisplay() {
        const cartItems = document.getElementById('cart-items');
        const totalOffers = document.getElementById('totalOffers');
        const toggleBtn = document.getElementById('toggle-cart');
        
        
        if (offerCart.length === 0) {
        cartItems.innerHTML = '<div class="empty-cart">No offers selected</div>';
        totalOffers.textContent = 'Total Offers: 0';
        toggleBtn.textContent = 'Offer Cart (0)';
        closeOfferCart();
        return;
        }
        
        cartItems.innerHTML = offerCart.map((group, index) => `
        <div class="scrap-item">
        <div class="cart-item-header">
        <div class="cart-item-title">${group.title}</div>
        <!--   <div class="cart-item-date">${group.dates.join(', ')}</div> -->
        <div class="cart-item-description">${group.description}</div>
        </div>
        <div class="offer-stepper">
        <button class="off-decrement-btn" 
        onclick="adjustOfferQuantity(${index}, -1)"
        ${group.count <= 1 ? 'disabled' : ''}>-</button> <!-- Only check count -->
        <span class="offer-qty-display">${group.count}</span>
        <button class="off-increment-btn" 
        onclick="adjustOfferQuantity(${index}, 1)"
        ${(group.allowOnce && group.count >= 1) || 
        (group.dependent && scrapItems.length === 0) ? 'disabled' : ''}>+</button>
        </div>
        <span class="offer-delete-btn" data-title="${group.title}">✕</span>
        </div>
        `).join('');
        
        // offer-delete-button
        document.querySelectorAll('.offer-delete-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
        const index = parseInt(e.target.dataset.index);
        offerCart.splice(index, 1);
        updateCartDisplay();
        updateScrapButtonStatus();
        showFeedback('Offer removed');
        });
        });
        
        const totalItems = offerCart.reduce((sum, group) => sum + group.count, 0);
        totalOffers.textContent = `Total Offers: ${totalItems}`;
        toggleBtn.textContent = `Offer Cart (${totalItems})`;
        }
        
        
        
        
        // offer-stepper logic
        function adjustOfferQuantity(index, delta) {
        const group = offerCart[index];
        const maxLimit = group.allowOnce ? 1 : Infinity;
        
        // Validation checks
        if (delta === 1) {
        if (group.dependent && scrapItems.length === 0) {
        showFeedback('Requires menu items!');
        return;
        }
        if (group.count >= maxLimit) {
        showFeedback('Can only add once!');
        return;
        }
        }
        
        group.count += delta;
        
        if (group.count < 1) {
        offerCart.splice(index, 1);
        }
        
        updateCartDisplay();
        updateOfferAddButtons();
        updateScrapButtonStatus();
        }                 
        
        
        
        
        
        
        
        
        
        
        
        
        
        // offer-order button
        document.getElementById('order-offers').addEventListener('click', sendOfferCart);
        
        function sendOfferCart() {
        if (offerCart.length === 0) {
        showFeedback('Cart is empty!');
        return;
        }
        
        let message = '🎊\n';
        offerCart.forEach((group, index) => {
        group.dates.forEach(date => {
        message += `*${group.title}*\n${date}\n${group.description}\n〰️〰️〰️〰️〰️〰️〰️〰️〰\n`;
        });
        });
        
        message += '\nPlease confirm these offers!';
        const encodedMessage = encodeURIComponent(message);
        window.open(`https://wa.me/${whatsappOfferNumber}?text=${encodedMessage}`, '_blank');
        
        // Clear the cart after ordering
        offerCart = [];
        updateCartDisplay();
        showFeedback('Offers sent! Cart cleared');
        closeOfferCart();
        updateScrapButtonStatus();
        }
        
        // offer-clear button
        document.getElementById('clear-offers').addEventListener('click', clearOfferCart);
        
        function clearOfferCart() {
        offerCart = [];
        updateCartDisplay();
        updateOfferAddButtons();
        updateScrapButtonStatus();
        showFeedback('Offer cart cleared!');
        closeOfferCart();
        }
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        // Cloing of scraplist and offer-cart
        
        
        // scrap-close-outside offer-close-outside
        document.addEventListener('click', (e) => {
        const scrapList = document.getElementById('scrapList');
        const offerCart = document.getElementById('offer-cart');
        const scrapButton = document.getElementById('scrapButton');
        const toggleCart = document.getElementById('toggle-cart');
        
        // Close scrap list if click is outside
        if (scrapList.style.display === 'flex' && 
        !scrapList.contains(e.target) && 
        !scrapButton.contains(e.target)) {
        closeScrapList();
        }
        
        // Close offer cart if click is outside
        if (offerCart.style.display === 'block' && 
        !offerCart.contains(e.target) && 
        !toggleCart.contains(e.target)) {
        closeOfferCart();
        }
        });
        
        // offer-close-outside
        document.addEventListener('click', (e) => {
        if (!offersContainer.contains(e.target) && !offersButton.contains(e.target)) {
        offersContainer.style.display = 'none';
        const arrow = offersButton.querySelector('.arrow');
        if (arrow) arrow.textContent = '▼';
        }
        });
        
        
        // scrap-close-cross
        document.getElementById('closeScrap').addEventListener('click', function() {
        closeScrapList();
        closeOfferCart()
        });
        
        // Modify close functions
        function closeScrapList() {
        const scrapList = document.getElementById('scrapList');
        const offerCartElement = document.getElementById('offer-cart');
        const overlay = document.querySelector('.scrap-overlay');
        
        scrapList.style.display = 'none';
        scrapVisible = false;
        isWarningVisible = false;
        
        // Check if offer cart is visible or has items before hiding overlay
        if (offerCartElement.style.display === 'block') {
        overlay.style.display = 'block'; // Keep overlay if offer cart is visible
        document.body.style.overflow = 'hidden';
        } else {
        overlay.style.display = 'none'; // Hide overlay only when both are closed
        document.body.style.overflow = '';
        }
        }                     
        
        // offer-close-cross
        document.getElementById('closeOffer').addEventListener('click', closeOfferCart);                    
        
        function closeOfferCart() {
        const scrapList = document.getElementById('scrapList');
        const overlay = document.querySelector('.scrap-overlay');
        
        // Hide the offer cart
        document.getElementById('offer-cart').style.display = 'none';
        offerCartVisible = false;
        
        // Only hide the overlay if scrapList is also not visible
        if (scrapList.style.display !== 'flex') {
        overlay.style.display = 'none';
        document.body.style.overflow = '';
        }
        }
        
        
        // scrap-close-esc offer-close-esc
        document.addEventListener('keydown', (e) => {
        if (e.key === "Escape") {
        closeScrapList();
        closeOfferCart();
        }
        });
        
        
        // Add stopPropagation to the containers to prevent immediate closing
        document.getElementById('scrapList').addEventListener('click', e => e.stopPropagation());
        document.getElementById('offer-cart').addEventListener('click', e => e.stopPropagation());                
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        // Add this function to update positions
        function updateCartPosition() {
        const scrapList = document.getElementById('scrapList');
        const offerCart = document.getElementById('offer-cart');
        
        // Ensure smooth transition effect
        offerCart.style.transition = 'top 0.5s ease-in-out, transform 0.5s ease-in-out';
        
        
        if (scrapList.style.display === 'flex' && scrapList.children.length > 0) {
        // Position offer-cart below scrapList but keep it centered
        const scrapListRect = scrapList.getBoundingClientRect();
        offerCart.style.position = 'fixed';
        offerCart.style.top = `${scrapListRect.bottom + 10}px`;
        offerCart.style.left = '50%'; // Center it horizontally
        offerCart.style.transform = 'translateX(-50%)'; // Adjust centering
        offerCart.style.width = `${scrapList.offsetWidth}px`; // Optional: Match width
        } else {
        // Reset to default centered position
        offerCart.style.position = 'fixed';
        offerCart.style.top = '8%'; // Default position when scrapList is empty
        offerCart.style.left = '50%'; // Keep it centered
        offerCart.style.transform = 'translateX(-50%)';
        offerCart.style.width = ''; // Reset width
        }
        }
        
        // Observer to track changes in scrapList
        const scrapListObserver = new ResizeObserver(() => {
        if (scrapVisible) {
        updateCartPosition();
        }
        });
        
        // Update position on window resize
        window.addEventListener('resize', updateCartPosition);
        window.addEventListener('scroll', updateCartPosition); // Keep it fixed on scroll  
        
        
        
        
        
        
        
        
        document.addEventListener("DOMContentLoaded", () => {
        const scrapList = document.getElementById('scrapList');
        const offerCart = document.getElementById('offer-cart');
        
        function adjustScrapListHeight() {
        const offerCartDisplay = window.getComputedStyle(offerCart).display;
        
        
        // Apply transition directly in JavaScript
        scrapList.style.transition = "max-height 0.5s ease-in-out";
        scrapList.style.transition = (offerCartDisplay === 'none') ? "max-height 0.5s ease-in-out" : "";
        
        scrapList.style.maxHeight = (offerCartDisplay === 'none') ? '55vh' : '45vh';        
        }
        
        const observer = new MutationObserver(() => adjustScrapListHeight());
        
        observer.observe(offerCart, {
        attributes: true,
        attributeFilter: ['style', 'class']
        });
        
        window.addEventListener('resize', adjustScrapListHeight);
        
        adjustScrapListHeight(); // Initial adjustment
        });
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        

        
        
        
        
        
        </script>        
        <script src="app.js"></script> <!-- PWA -->                
        <script src="com.js"></script> <!-- Commu sidebar -->                
        <script src="ham.js"></script> <!-- Hamburger sidebar -->                
        <script src="counter.js"></script> <!-- Counters -->                
        <script src="cheat.js"></script> <!-- Cheats, Dev tools -->                
        </body>
        </html>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
